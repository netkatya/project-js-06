import{S as v,N as w,P as L,A as O,a as g,i as S}from"./assets/vendor-BihSqLm6.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const p=document.querySelector(".burger-btn"),B=document.querySelector(".mobile-menu"),H=document.querySelector(".close-btn"),N=document.querySelector(".mobile-menu-nav-list");p.addEventListener("click",()=>{document.body.classList.add("no-scroll"),B.classList.add("is-open"),p.classList.add("rotate")});H.addEventListener("click",()=>{B.classList.remove("is-open"),document.body.classList.remove("no-scroll"),p.classList.remove("rotate")});N.addEventListener("click",e=>{e.target.classList.contains("mobile-menu-nav-item-link")&&(document.body.classList.remove("no-scroll"),B.classList.remove("is-open"),p.classList.remove("rotate"))});new v(".hero .swiper",{modules:[w,L,O],slidesPerView:1,navigation:{nextEl:".hero .button-next",prevEl:".hero .button-prev",disabledClass:"disabled"},autoplay:{delay:4e3,disableOnInteraction:!1}});const k="https://books-backend.p.goit.global/books/";async function V(){try{return(await g(`${k}category-list`)).data}catch(e){alert(e.message)}}async function W(){try{return(await g(`${k}top-books`)).data}catch(e){alert(e.message)}}async function R(e){try{return(await g(`${k}category?category=${e}`)).data}catch(t){alert(t.message)}}async function D(e){try{return(await g(`${k}${e}`)).data}catch(t){alert(t.message)}}S.settings({position:"topRight"});const o={loadMoreBtn:document.querySelector(".books-list-load-more"),goToTopBtn:document.querySelector(".books-list-go-top"),dropdown:document.querySelector(".books-category-list"),dropdownList:document.querySelector(".category-dropdown-list"),categoryModal:document.querySelector(".category-modal"),dropdownBtn:document.querySelector(".category-list-dropdown-button"),booksList:document.querySelector(".books-list"),booksShowedSummary:document.querySelector(".books-section-subheader-summary"),loader:document.querySelector(".loader"),categoryBox:document.querySelector(".books-category-box"),bookModal:document.querySelector(".books-modal-overlay"),bookImage:document.querySelector(".books-modal-picture"),bookHeader:document.querySelector(".books-modal-header"),bookAuthor:document.querySelector(".books-modal-text"),bookPrice:document.querySelector(".books-modal-price"),divBookModal:document.querySelector("div.books-modal"),bookDetails:document.querySelector(".ac-text.details"),bookQuantity:document.querySelector(".quantity-buttons-input"),bookShipping:document.querySelector(".ac-text.shipping"),bookReturns:document.querySelector(".ac-text.returns")};function y(e){S.error({title:"Error",message:e})}function q(e){S.info({message:e})}function $(){o.loader.style.display="block"}function h(){o.loader.style.display="none"}function Y(){o.loadMoreBtn.style.display="block"}function i(){o.loadMoreBtn.style.display="none"}function j(){o.bookModal.classList.add("is-open")}let l=[],d=10,u=1,m=0;window.innerWidth>=1440&&(d=24);async function F(){try{let e=await V();e=[{list_name:"All categories"},...e].filter(({list_name:t})=>t.trim()!=""),X(e)}catch(e){y(e)}finally{}}async function I(e=!1){try{l=(await W()).flatMap(({books:n})=>n),E(l,e)}catch{i(),y("Error loading books from the server!")}finally{h()}}async function Q(e,t=!1){try{l=[...await R(e)],E(l,t)}catch{i(),y("Error loading books from the server!")}finally{h()}}function E(e,t){let n=0;e.length>=d&&(n=1+Math.ceil((e.length-d)/4)),e.length>0?(K(e,t),u>=n?(i(),n>1&&q("We're sorry, but you've reached the end of search results.")):Y(),u++):(P(),i(),y("Sorry, there are no images matching your search query.Please try again!"))}function U(e){i(),$(),setTimeout(()=>{E(l,!0),h()},500)}function z(e){if(!e)return;const t=()=>{window.scrollY>300?e.classList.remove("visually-hidden"):e.classList.add("visually-hidden")},n=()=>{window.scrollTo({top:0,behavior:"smooth"})};window.addEventListener("scroll",t),e.addEventListener("click",n),t()}function K(e,t=!1){let n;u===1?n=(u-1)*d:n=m,m=Math.min(e.length,n+(t?4:d));const a=e.slice(n,m).map(({_id:s,title:r,author:c,price:_,book_image:A,description:T})=>`<li class="books-item" data-id="${s}">
            <img class="books-item__image" src="${A}" alt="${T}"/>
            <div class="books-item__header">
              <span class="books-item__title">${r}</span>
              <span class="books-item__price"> ${"$"+_}</span>
            </div>
            <p class="books-item__author">${c}</p>
            <button class="books__learnmore-btn books-main-btn books-transparent-btn" type="button">Learn More</button>
          </li>`).join("");t?o.booksList.insertAdjacentHTML("beforeend",a):o.booksList.innerHTML=a,o.booksShowedSummary.textContent=`Showing ${m} of ${l.length}`,t&&Z()}function G(){o.dropdown.classList.toggle("is-open");const e=o.categoryBox.getBoundingClientRect();o.categoryModal.style.position="absolute",o.categoryModal.style.top=`${e.bottom+4}px`,o.categoryModal.style.left=`${e.left-8}px`,o.categoryModal.style.display="block",document.body.classList.add("modal-open")}function J(){u=1}function P(){o.booksList.innerHTML=""}function X(e){o.dropdownList.innerHTML=e.map(({list_name:t})=>`<li class="categories__item">${t}</li>`).join("")}function Z(){const e=document.querySelector(".books-list .books-item");let t=4;if(window.innerWidth>=1440?t=1:window.innerWidth>=768&&(t=2),e){const n=e.getBoundingClientRect().height;window.scrollBy({top:n*t,behavior:"smooth"})}}function C(){document.body.classList.remove("modal-open"),o.dropdown.classList.remove("is-open"),o.categoryModal.style.position="",o.categoryModal.style.top="",o.categoryModal.style.left="",o.categoryModal.style.display=""}function ee(e){if(!e.target.classList.contains("categories__item"))return;window.innerWidth<1440&&C();const t=e.target;J(),P(),$(),t.textContent.toLowerCase()==="all categories"?I():Q(encodeURIComponent(t.textContent.trim()))}function te(e){if(!e.target.classList.contains("books__learnmore-btn"))return;const n=e.target.parentElement.dataset.id.trim();oe(n)}async function oe(e,t=!1){try{const n=await D(e);console.dir(n),ne(n)}catch{i(),y("Error loading books from the server!")}finally{h()}}function ne({_id:e,title:t,author:n,price:a,book_image:s,description:r}){o.divBookModal.setAttribute("data-id",e),o.bookImage.src=s,o.bookImage.alt=r,o.bookHeader.textContent=t,o.bookAuthor.textContent=n,o.bookPrice.textContent=`${a}`,o.bookQuantity.value="1",o.bookDetails.textContent=r||`I Will Find You is a gripping thriller by the master of suspense,
              Harlan Coben. The story follows David Burroughs, a former prisoner
              wrongfully convicted of murdering his own son. When he discovers a
              clue suggesting his son might still be alive, David escapes from
              prison to uncover the truth. Fast-paced, emotional, and full of
              unexpected twists — this novel will keep you hooked until the very
              last page.`,j(),document.body.classList.add("modal-open")}i();F();I();o.dropdownBtn.addEventListener("click",G);o.dropdownList.addEventListener("click",ee);o.loadMoreBtn.addEventListener("click",U);o.booksList.addEventListener("click",te);z(o.goToTopBtn);o.dropdown.addEventListener("click",e=>{e.target===o.dropdown&&C()});window.addEventListener("keydown",e=>{e.key==="Escape"&&C()});const se=document.querySelectorAll(".ac-trigger"),re=document.querySelector(".minus-button"),ae=document.querySelector(".plus-button"),b=document.querySelector(".quantity-buttons-input"),ie=document.querySelector(".books-modal-buy-button"),le=document.querySelector(".books-modal-add-button");ie.addEventListener("click",ce);le.addEventListener("click",de);function ce(e){q("Дякуємо за покупку!")}function de(e){q(`Ви вибрали книгу ${o.bookHeader.textContent} автора ${o.bookAuthor.textContent} в кількості ${o.bookQuantity.value} шт.`)}se.forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".ac"),n=t.querySelector(".ac-panel"),a=t.classList.contains("is-active");document.querySelectorAll(".ac").forEach(s=>{s.classList.remove("is-active");const r=s.querySelector(".ac-panel");r.style.maxHeight=null}),a||(t.classList.add("is-active"),n.style.maxHeight=n.scrollHeight+"px")})});re.addEventListener("click",()=>{let e=parseInt(b.value);e>1&&(b.value=e-1)});ae.addEventListener("click",()=>{let e=parseInt(b.value);b.value=e+1});new v(".feedbacks .swiper",{modules:[w,L],slidesPerView:1,spaceBetween:20,navigation:{nextEl:".feedbacks .button-next",prevEl:".feedbacks .button-prev",disabledClass:"disabled"},pagination:{el:".feedbacks .pagination-for-swiper",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1024:{slidesPerView:3,spaceBetween:24}}});new v(".events .swiper",{modules:[w,L],slidesPerView:1,spaceBetween:20,navigation:{nextEl:".events .button-next",prevEl:".events .button-prev",disabledClass:"disabled"},pagination:{el:".events .pagination-for-swiper",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1024:{enabled:!1}}});const f=document.querySelector(".events-modal-overlay"),ue=document.querySelector(".events-close-button"),ye=document.querySelector(".events-modal-text");let x=0;function me(e){x=window.scrollY,ye.textContent=e,f.classList.add("is-open"),document.body.classList.add("modal-open"),document.documentElement.classList.add("modal-open"),document.body.style.top=`-${x}px`,document.body.style.width="100%"}function M(){f.classList.remove("is-open"),document.body.classList.remove("modal-open"),document.documentElement.classList.remove("modal-open"),document.body.style.position="",document.body.style.width="";const e=parseInt(document.body.style.top||"0")*-1;document.body.style.top="",window.scrollTo(0,e)}f.addEventListener("click",e=>{e.target===f&&M()});window.addEventListener("keydown",e=>{e.key==="Escape"&&M()});ue.addEventListener("click",M);const pe=document.querySelectorAll(".events-list-button");pe.forEach(e=>{e.addEventListener("click",t=>{const a=t.currentTarget.closest(".swiper-slide").querySelector(".events-list-header").textContent.trim();me(a)})});document.querySelector(".loader");
//# sourceMappingURL=index.js.map
