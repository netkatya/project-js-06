import{S as L,N as v,P as h,a as b,i as S}from"./assets/vendor-DLHqdSEL.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const p=document.querySelector(".burger-btn"),B=document.querySelector(".mobile-menu"),A=document.querySelector(".close-btn"),O=document.querySelector(".mobile-menu-nav-list");p.addEventListener("click",()=>{document.body.classList.add("no-scroll"),B.classList.add("is-open"),p.classList.add("rotate")});A.addEventListener("click",()=>{B.classList.remove("is-open"),document.body.classList.remove("no-scroll"),p.classList.remove("rotate")});O.addEventListener("click",e=>{e.target.classList.contains("mobile-menu-nav-item-link")&&(document.body.classList.remove("no-scroll"),B.classList.remove("is-open"),p.classList.remove("rotate"))});new L(".hero .swiper",{modules:[v,h],slidesPerView:1,navigation:{nextEl:".hero .button-next",prevEl:".hero .button-prev",disabledClass:"disabled"}});const w="https://books-backend.p.goit.global/books/";async function H(){try{return(await b(`${w}category-list`)).data}catch(e){alert(e.message)}}async function V(){try{return(await b(`${w}top-books`)).data}catch(e){alert(e.message)}}async function N(e){try{return(await b(`${w}category?category=${e}`)).data}catch(t){alert(t.message)}}async function R(e){try{return(await b(`${w}${e}`)).data}catch(t){alert(t.message)}}S.settings({position:"topRight"});const s={loadMoreBtn:document.querySelector(".books-list-load-more"),goToTopBtn:document.querySelector(".books-list-go-top"),dropdown:document.querySelector(".books-category-list"),dropdownList:document.querySelector(".category-dropdown-list"),categoryModal:document.querySelector(".category-modal"),dropdownBtn:document.querySelector(".category-list-dropdown-button"),booksList:document.querySelector(".books-list"),booksShowedSummary:document.querySelector(".books-section-subheader-summary"),loader:document.querySelector(".loader"),categoryBox:document.querySelector(".books-category-box")};function y(e){S.error({title:"Error",message:e})}function W(e){S.info({message:e})}function x(){s.loader.style.display="block"}function k(){s.loader.style.display="none"}function j(){s.loadMoreBtn.style.display="block"}function a(){s.loadMoreBtn.style.display="none"}let c=[],d=10,u=1,m=0;window.innerWidth>=1440&&(d=24);async function Y(){try{let e=await H();e=[{list_name:"All categories"},...e].filter(({list_name:t})=>t.trim()!=""),J(e)}catch(e){y(e)}finally{}}async function _(e=!1){try{c=(await V()).flatMap(({books:o})=>o),E(c,e)}catch{a(),y("Error loading books from the server!")}finally{k()}}async function U(e,t=!1){try{c=[...await N(e)],E(c,t)}catch{a(),y("Error loading books from the server!")}finally{k()}}function E(e,t){let o=0;e.length>=d&&(o=1+Math.ceil((e.length-d)/4)),e.length>0?(F(e,t),u>=o?(a(),o>1&&W("We're sorry, but you've reached the end of search results.")):j(),u++):($(),a(),y("Sorry, there are no images matching your search query.Please try again!"))}function z(e){a(),x(),setTimeout(()=>{E(c,!0),k()},500)}function D(e){if(!e)return;const t=()=>{window.scrollY>300?e.classList.remove("visually-hidden"):e.classList.add("visually-hidden")},o=()=>{window.scrollTo({top:0,behavior:"smooth"})};window.addEventListener("scroll",t),e.addEventListener("click",o),t()}function F(e,t=!1){let o;u===1?o=(u-1)*d:o=m,m=Math.min(e.length,o+(t?4:d));const i=e.slice(o,m).map(({_id:n,title:r,author:l,price:P,book_image:I,description:T})=>`<li class="books-item" data-id="${n}">
            <img class="books-item__image" src="${I}" alt="${T}"/>
            <div class="books-item__header">
              <span class="books-item__title">${r}</span>
              <span class="books-item__price"> ${"$"+P}</span>
            </div>
            <p class="books-item__author">${l}</p>
            <button class="books__learnmore-btn books-main-btn books-transparent-btn" type="button">Learn More</button>
          </li>`).join("");t?s.booksList.insertAdjacentHTML("beforeend",i):s.booksList.innerHTML=i,s.booksShowedSummary.textContent=`Showing ${m} of ${c.length}`,t&&Q()}function K(){s.dropdown.classList.toggle("is-open");const e=s.categoryBox.getBoundingClientRect();s.categoryModal.style.position="absolute",s.categoryModal.style.top=`${e.bottom+4}px`,s.categoryModal.style.left=`${e.left}px`,s.categoryModal.style.display="block",document.body.classList.add("modal-open")}function G(){u=1}function $(){s.booksList.innerHTML=""}function J(e){s.dropdownList.innerHTML=e.map(({list_name:t})=>`<li class="categories__item">${t}</li>`).join("")}function Q(){const e=document.querySelector(".books-list .books-item");let t=4;if(window.innerWidth>=1440?t=1:window.innerWidth>=768&&(t=2),e){const o=e.getBoundingClientRect().height;window.scrollBy({top:o*t,behavior:"smooth"})}}function q(){s.dropdown.classList.remove("is-open"),document.body.classList.remove("modal-open"),s.categoryModal.style.position="",s.categoryModal.style.top="",s.categoryModal.style.left="",s.categoryModal.style.display=""}function X(e){if(!e.target.classList.contains("categories__item"))return;window.innerWidth<1440&&q();const t=e.target;G(),$(),x(),t.textContent.toLowerCase()==="all categories"?_():U(encodeURIComponent(t.textContent.trim()))}function Z(e){if(!e.target.classList.contains("books__learnmore-btn"))return;const o=e.target.parentElement.dataset.id.trim();ee(o)}async function ee(e,t=!1){try{const o=await R(e);console.dir(o)}catch{a(),y("Error loading books from the server!")}finally{k()}}a();Y();_();s.dropdownBtn.addEventListener("click",K);s.dropdownList.addEventListener("click",X);s.loadMoreBtn.addEventListener("click",z);s.booksList.addEventListener("click",Z);D(s.goToTopBtn);s.dropdown.addEventListener("click",e=>{e.target===s.dropdown&&q()});window.addEventListener("keydown",e=>{e.key==="Escape"&&q()});const te=document.querySelectorAll(".ac-trigger"),oe=document.querySelector(".minus-button"),se=document.querySelector(".plus-button"),f=document.querySelector(".quantity-buttons-input");te.forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".ac"),o=t.querySelector(".ac-panel"),i=t.classList.contains("is-active");document.querySelectorAll(".ac").forEach(n=>{n.classList.remove("is-active");const r=n.querySelector(".ac-panel");r.style.maxHeight=null}),i||(t.classList.add("is-active"),o.style.maxHeight=o.scrollHeight+"px")})});oe.addEventListener("click",()=>{let e=parseInt(f.value);e>1&&(f.value=e-1)});se.addEventListener("click",()=>{let e=parseInt(f.value);f.value=e+1});new L(".feedbacks .swiper",{modules:[v,h],slidesPerView:1,spaceBetween:20,navigation:{nextEl:".feedbacks .button-next",prevEl:".feedbacks .button-prev",disabledClass:"disabled"},pagination:{el:".feedbacks .pagination-for-swiper",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1024:{slidesPerView:3,spaceBetween:24}}});new L(".events .swiper",{modules:[v,h],slidesPerView:1,spaceBetween:20,navigation:{nextEl:".events .button-next",prevEl:".events .button-prev",disabledClass:"disabled"},pagination:{el:".events .pagination-for-swiper",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1024:{enabled:!1}}});const g=document.querySelector(".events-modal-overlay"),ne=document.querySelector(".events-close-button"),re=document.querySelector(".events-modal-text");let C=0;function ie(e){C=window.scrollY,re.textContent=e,g.classList.add("is-open"),document.body.classList.add("modal-open"),document.documentElement.classList.add("modal-open"),document.body.style.top=`-${C}px`,document.body.style.width="100%"}function M(){g.classList.remove("is-open"),document.body.classList.remove("modal-open"),document.documentElement.classList.remove("modal-open"),document.body.style.position="",document.body.style.width="";const e=parseInt(document.body.style.top||"0")*-1;document.body.style.top="",window.scrollTo(0,e)}g.addEventListener("click",e=>{e.target===g&&M()});window.addEventListener("keydown",e=>{e.key==="Escape"&&M()});ne.addEventListener("click",M);const ae=document.querySelectorAll(".events-list-button");ae.forEach(e=>{e.addEventListener("click",t=>{const i=t.currentTarget.closest(".swiper-slide").querySelector(".events-list-header").textContent.trim();ie(i)})});document.querySelector(".loader");
//# sourceMappingURL=index.js.map
